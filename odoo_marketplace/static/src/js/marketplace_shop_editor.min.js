odoo.define("website_sale.editor",function(e){"use strict";e("website_sale.editor");var t=e("web.ajax"),s=e("web.core"),l=e("web.Model"),i=e("web_editor.snippets.options");s._t;i.registry.website_sale=i.registry.website_sale.extend({start:function(){var e=this;this.td_seller_shop_id=parseInt(this.$target.find('[data-oe-model="seller.shop"]').data("oe-id")),this.td_seller_id=parseInt(this.$target.find('[data-oe-model="res.partner"]').data("oe-id")),this.td_seller_shop_id&&new l("seller.shop.style").call("search_read",[[]]).then(function(t){var s=e.$el.find('ul[name="style"]');for(var l in t)s.append($('<li data-style="'+t[l].id+'" data-toggle_class="'+t[l].html_class+'"/>').append($("<a/>").text(t[l].name)));e.set_active()}),this.td_seller_id&&new l("seller.shop.style").call("search_read",[[]]).then(function(t){var s=e.$el.find('ul[name="style"]');for(var l in t)s.append($('<li data-style="'+t[l].id+'" data-toggle_class="'+t[l].html_class+'"/>').append($("<a/>").text(t[l].name)));e.set_active()}),this.td_seller_shop_id||this.td_seller_id||this._super(),this.bind_resize()},reload:function(){location.href.match(/\?enable_editor/)?location.reload():location.href=location.href.replace(/\?(enable_editor=1&)?|#.*|$/,"?enable_editor=1&")},bind_resize:function(){var e=this;this.$el.on("mouseenter",'ul[name="size"] table',function(e){$(e.currentTarget).addClass("oe_hover")}),this.$el.on("mouseleave",'ul[name="size"] table',function(e){$(e.currentTarget).removeClass("oe_hover")}),this.$el.on("mouseover",'ul[name="size"] td',function(e){for(var t=$(e.currentTarget),s=t.closest("table"),l=t.index()+1,i=t.parent().index()+1,d=[],a=0;a<i;a++)d.push("tr:eq("+a+")");for(var n=s.find(d.join(",")),r=[],o=0;o<l;o++)r.push("td:eq("+o+")");var _=n.find(r.join(","));s.find("td").removeClass("select"),_.addClass("select")}),this.$el.on("click",'ul[name="size"] td',function(s){var l=$(s.currentTarget),i=l.index()+1,d=l.parent().index()+1;e.product_tmpl_id&&t.jsonRpc("/shop/change_size","call",{id:e.product_tmpl_id,x:i,y:d}).then(e.reload),e.td_seller_shop_id&&t.jsonRpc("/seller/shop/change_size","call",{id:e.td_seller_shop_id,x:i,y:d}).then(e.reload),e.td_seller_id&&t.jsonRpc("/seller/change_size","call",{id:e.td_seller_id,x:i,y:d}).then(e.reload)})},style:function(e,s,l){"click"===e&&(this.product_tmpl_id&&t.jsonRpc("/shop/change_styles","call",{id:this.product_tmpl_id,style_id:s}),this.td_seller_shop_id&&t.jsonRpc("/seller/shop/change_styles","call",{id:this.td_seller_shop_id,style_id:s}),this.td_seller_id&&t.jsonRpc("/seller/change_styles","call",{id:this.td_seller_id,style_id:s}))},go_to:function(e,s){"click"===e&&(this.product_tmpl_id&&t.jsonRpc("/shop/change_sequence","call",{id:this.product_tmpl_id,sequence:s}).then(this.reload),this.td_seller_shop_id&&t.jsonRpc("/seller/shop/change_sequence","call",{id:this.td_seller_shop_id,sequence:s}).then(this.reload),this.td_seller_id&&t.jsonRpc("/seller/change_sequence","call",{id:this.td_seller_id,sequence:s}).then(this.reload))}})});