odoo.define("web.WebClient",function(e){"use strict";$(document).ready(function(){function r(){$("#is_seller").prop("checked")?($("#mp_seller_details").show(),$("#profile_url").attr("required","required"),$("#country_id").attr("required","required"),$("#mp_terms_conditions").attr("required","required")):($("#mp_seller_details").hide(),$("#profile_url").removeAttr("required"),$("#country_id").removeAttr("required"),$("#mp_terms_conditions").removeAttr("required"))}var s=1;$("section#seller_review_discussion section#discussion section.mb32.hidden-print form.o_website_chatter_form img.img.pull-left.img-circle").css({width:"30px","margin-right":"10px"}),$("section#seller_review_discussion section#discussion section.mb32.hidden-print form.o_website_chatter_form div.pull-left.mb32").css({width:"95%"}),$("section#seller_review_discussion section#discussion section.mb32.hidden-print form.o_website_chatter_form textarea").attr("rows","2"),$("section#seller_review_discussion section#discussion ul.media-list.o_website_comments div.media-body img.media-object.pull-left.img-circle").css({width:"30px","margin-right":"10px"}),$("section#seller_review_discussion section#discussion section.mb32.hidden-print form.o_website_chatter_form div.pull-left.mb32 button").addClass("btn-xs"),$("#is_seller").each(function(){r()}),$("#mp_terms_conditions").attr("checked",!1),$(".oe_website_login_container").each(function(s){function i(r){var s=e("web.ajax"),i=String(r.val()),o=r.closest(".has-feedback"),a=r.closest(".oe_signup_form").find(".oe_login_buttons :button");a.attr({disabled:"disabled"});var t=o.find(".form-control-feedback");$("#profile_url").hasClass("invalide_url")&&$("#profile_url").removeClass("invalide_url"),t.hasClass("fa-pencil")&&t.removeClass("fa-pencil"),t.hasClass("fa-times")&&t.removeClass("fa-times"),t.hasClass("fa-check")&&t.removeClass("fa-check"),i.match(/^[a-zA-Z0-9-_]+$/)?i.match(/^[-_][a-zA-Z0-9-_]*$/)||i.match(/^[a-zA-Z0-9-_]*[-_]$/)?(o.addClass("has-error"),$("#profile_url_error").html("Special characters are not allowed in begining or at the last of the string."),$("#profile_url").addClass("invalide_url"),$("#mp_terms_conditions").attr("checked",!1),$("#profile_url_error").show()):(t.addClass("fa-spinner fa-pulse"),s.jsonRpc("/profile/url/handler/vaidation","call",{url_handler:i}).then(function(e){a.attr({disabled:!1}),e&&""!=i?(o.hasClass("has-error")&&o.removeClass("has-error"),t.hasClass("fa-pencil")&&t.removeClass("fa-pencil"),t.hasClass("fa-times")&&t.removeClass("fa-times"),t.hasClass("fa-spinner fa-pulse")&&t.removeClass("fa-spinner fa-pulse"),o.addClass("has-success"),t.addClass("fa-check"),$("#profile_url_error").hide()):(o.hasClass("has-success")&&o.removeClass("has-success"),t.hasClass("fa-pencil")&&t.removeClass("fa-pencil"),t.hasClass("fa-check")&&t.removeClass("fa-check"),t.hasClass("fa-spinner fa-pulse")&&t.removeClass("fa-spinner fa-pulse"),o.addClass("has-error"),t.addClass("fa-times"),""!=i?$("#profile_url_error").html("Sorry, this profile url is not available."):$("#profile_url_error").html("Please Enter Your Profile URL."),$("#profile_url").addClass("invalide_url"),$("#profile_url_error").show(),$("#mp_terms_conditions").attr("checked",!1))})):(o.addClass("has-error"),$("#profile_url_error").html("Only alphanumeric([0-9],[a-z]) and some special characters(-,_) are allowed, Spaces are not allowed."),$("#profile_url").addClass("invalide_url"),$("#mp_terms_conditions").attr("checked",!1),$("#profile_url_error").show())}$(document).ready(function(){$('[data-toggle="popover"]').popover()}),$(document).on("click","#mp_t_and_c",function(){var e=$("#mp_t_and_c_data").data("terms");$(e).text().trim().length>0?$("#show_mp_t_and_c").html(e):$("#show_mp_t_and_c").html("No Terms and Conditions.")}),$(document).on("change","#is_seller",function(){r()}),$(document).on("change","#mp_terms_conditions",function(){i($("#profile_url"))}),$(document).on("input","#profile_url",function(){i($(this))})}),$("#recently_product_tab").click(function(r){var i=e("web.ajax"),o=parseInt($(this).find("#shop_id").first().val(),10);1===s&&($(".mp-box-review_loader").show(),i.jsonRpc("/seller/shop/recently-product/","call",{shop_id:o}).then(function(e){var r=$(e);s+=1,r.appendTo("#tab22"),$(".mp-box-review_loader").hide()})),r.preventDefault(r)}),$("#profile_recently_product_tab").click(function(r){var i=e("web.ajax"),o=parseInt($(this).find("#seller_id").first().val(),10);1===s&&($(".mp-box-review_loader").show(),i.jsonRpc("/seller/profile/recently-product/","call",{seller_id:o}).then(function(e){var r=$(e);s+=1,r.appendTo("#seller_recent_prod"),$(".mp-box-review_loader").hide()})),r.preventDefault(r)}),$(".sol-info").on("click",function(){var r=parseInt($(this).siblings("#mp_order_line").first().val(),10),s=this;e("web.ajax").jsonRpc("/track/sol","call",{sol_id:r}).then(function(e){if(e)r=e;else var r="Information not found!!!";$(s).popover({placement:"left",title:"<center>More Information</center>",trigger:"focus",html:!0,content:String(r)}),$(s).popover("show"),$(s).on("mouseleave",function(){$(s).popover("destroy")})})})})});